(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{226:function(e,a,t){e.exports=t(247)},238:function(e,a,t){},247:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(180),l=t.n(o),i=t(10),s=t(146);var c=function(){const[e,a]=Object(n.useState)(!!sessionStorage.getItem("jwt"));return Object(n.useEffect)(()=>{const e=()=>{a(!!sessionStorage.getItem("jwt"))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),e},d=t(86),m=t(336),u=t(333),p=t(337),g=t(328),h=t(331),E=t(67);const x=t(323).a.create({baseURL:"https://younis-backend-production.up.railway.app"});x.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&"/login"!==window.location.pathname&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e))),x.interceptors.request.use(e=>{const a=sessionStorage.getItem("jwt");return a&&e.headers&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e));const b=()=>{const e=Object(E.useQueryClient)();return Object(E.useMutation)(async e=>{let{url:a,body:t,method:n,headers:r}=e;try{return(await x({method:n,url:a,data:t})).data}catch(o){throw o.response?o.response.data:o}},{onSuccess:()=>{e.invalidateQueries()},onError:e=>{console.error(e)}})};t(238);var f=function(){var e,a;const{mutateAsync:t}=b(),n=Object(i.p)(),{register:o,handleSubmit:l,formState:{errors:s},reset:c}=Object(d.a)();return r.a.createElement("div",{className:"login"},r.a.createElement(m.a,{maxWidth:"xl",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},r.a.createElement(u.a,{sx:{backgroundColor:"#EDDEE2",textAlign:"center",minWidth:540,maxWidth:700,maxHeight:450,padding:"50px 50px 50px 50px",boxShadow:"2px 2px 2px 2px rgba(0,0,0,0.1)",borderRadius:"10px"}},r.a.createElement(p.a,{variant:"h3",sx:{color:"#1a1a1a"}},"Welcome back!"),r.a.createElement(p.a,{variant:"h7",sx:{color:"#1a1a1a",fontSize:"17px"}},"Enter your user name and password to login"),r.a.createElement("form",{onSubmit:l(async e=>{try{const r=await t({url:"/api/auth/login/v1",method:"post",body:{username:e.username,password:e.password}});r.token&&sessionStorage.setItem("jwt",r.token),"admin"===(null===r||void 0===r?void 0:r.role)?n("/dashboard"):"user"===(null===r||void 0===r?void 0:r.role)&&n("/userDashboard")}catch(a){console.error("Error updating URL:",a)}})},r.a.createElement(g.a,Object.assign({},o("username",{required:"Username is required"}),{label:"Username",fullWidth:!0,margin:"normal",error:!!s.username,helperText:null===(e=s.username)||void 0===e?void 0:e.message})),r.a.createElement(g.a,Object.assign({},o("password",{required:"Password is required"}),{label:"Password",type:"password",fullWidth:!0,margin:"normal",error:!!s.password,helperText:null===(a=s.password)||void 0===a?void 0:a.message})),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{backgroundColor:"#319DEB",display:"flex",alignContent:"center",alignItems:"center",width:"50%",textTransform:"none",marginTop:"10px",marginLeft:"115px",padding:"15px",borderRadius:"10px"}},"Login")))))},y=t(322),v=t(193),w=t(341),C=t(342),j=t(321),O=t(145),S=t.n(O),k=t(127),N=t.n(k),D=t(326),T=t(335),L=t(340);function F(e){var a,t,o,l;let{handleClose:i,handleOpen:s}=e;const[c,m]=Object(n.useState)(!1),[E,x]=Object(n.useState)(""),[f,y]=Object(n.useState)("#4CCD99"),{mutateAsync:v}=b(),{register:w,reset:C,handleSubmit:j,formState:{errors:O}}=Object(d.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{open:s,onClose:i},r.a.createElement(u.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:6}},r.a.createElement(p.a,{variant:"h3"},"Add Employee"),r.a.createElement(p.a,{variant:"h5",sx:{paddingBottom:"20px"}},"Enter your employee information"),r.a.createElement("form",{onSubmit:j(async e=>{try{await v({url:"/api/employees",method:"post",body:{firstName:e.firstName,lastName:e.lastName,email:e.email,age:e.age}}),x("Employee added successfully!"),y("#4CCD99"),m(!0),C(),i()}catch(a){x("Failed to add employee. Please try again."),y("#FF6347"),m(!0),console.error("Error updating URL:",a)}})},r.a.createElement(g.a,Object.assign({},w("firstName",{required:"First Name is required"}),{label:"First Name",type:"text",fullWidth:!0,margin:"normal",error:!!O.firstName,helperText:null===(a=O.firstName)||void 0===a?void 0:a.message})),r.a.createElement(g.a,Object.assign({},w("lastName",{required:"Last Name is required"}),{label:"Last Name",type:"text",fullWidth:!0,margin:"normal",error:!!O.lastName,helperText:null===(t=O.lastName)||void 0===t?void 0:t.message})),r.a.createElement(g.a,Object.assign({},w("email",{required:"Email is required"}),{label:"Email",type:"email",fullWidth:!0,margin:"normal",error:!!O.email,helperText:null===(o=O.email)||void 0===o?void 0:o.message})),r.a.createElement(g.a,Object.assign({},w("age",{required:"Age is required"}),{label:"Age",type:"number",fullWidth:!0,margin:"normal",error:!!O.age,helperText:null===(l=O.age)||void 0===l?void 0:l.message})),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{backgroundColor:"#319DEB",display:"flex",alignContent:"center",alignItems:"center",width:"50%",textTransform:"none",marginTop:"10px",marginLeft:"115px",padding:"15px",borderRadius:"10px"}},"Done")))),r.a.createElement(T.a,{open:c,autoHideDuration:6e3,onClose:()=>m(!1)},r.a.createElement(L.a,{sx:{backgroundColor:f,color:"white"},message:E})))}const I=function(e,a,t){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Object(E.useQuery)(e,()=>(async(e,a)=>{const{data:t}=await x.get(e,{params:a});return t})(a,t),{refetchOnWindowFocus:!1,enabled:n})};var R=t(186),B=t.n(R),W=t(189),A=t.n(W),P=t(190),z=t.n(P);function q(e){let{handleClose:a,handleOpen:t,employeeId:o,employeeData:l}=e;const[i,s]=Object(n.useState)(!1),[c,m]=Object(n.useState)(""),[E,x]=Object(n.useState)("#4CCD99"),{mutateAsync:f}=b();console.log("employeeData",l);const{register:y,handleSubmit:v,setValue:w}=Object(d.a)();Object(n.useEffect)(()=>{const e=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(const n in a)"object"===typeof a[n]?e(a[n],"".concat(t).concat(n,".")):w("".concat(t).concat(n),a[n])};l&&e(l)},[l,w]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{open:t,onClose:a},r.a.createElement(u.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:6}},r.a.createElement(p.a,{variant:"h3"},"Edit Employee"),r.a.createElement(p.a,{variant:"h5",sx:{paddingBottom:"20px"}},"Edit your employee information"),r.a.createElement("form",{onSubmit:v(async e=>{try{const n={...l,...e};await f({url:"/api/employees/".concat(o),method:"put",body:n}),m("Employee Edited successfully!"),x("#4CCD99"),s(!0),a()}catch(t){console.error("Error updating URL:",t),m("Failed to Edit employee. Please try again."),x("#FF6347"),s(!0)}})},r.a.createElement(g.a,Object.assign({},y("firstName"),{label:"First Name",type:"text",fullWidth:!0,margin:"normal"})),r.a.createElement(g.a,Object.assign({},y("lastName"),{label:"Last Name",type:"text",fullWidth:!0,margin:"normal"})),r.a.createElement(g.a,Object.assign({},y("email"),{label:"Email",type:"email",fullWidth:!0,margin:"normal"})),r.a.createElement(g.a,Object.assign({},y("age"),{label:"Age",type:"number",fullWidth:!0,margin:"normal"})),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{backgroundColor:"#319DEB",display:"flex",alignContent:"center",alignItems:"center",width:"50%",textTransform:"none",marginTop:"10px",marginLeft:"115px",padding:"15px",borderRadius:"10px"}},"Done")))),r.a.createElement(T.a,{open:i,autoHideDuration:6e3,onClose:()=>s(!1)},r.a.createElement(L.a,{sx:{backgroundColor:E,color:"white"},message:c})))}function U(e){let{handleOpen:a,handleClose:t,employeeId:o}=e;const[l,i]=Object(n.useState)(!1),[s,c]=Object(n.useState)(""),[d,m]=Object(n.useState)("#4CCD99"),{mutateAsync:g}=b();return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{Modal:!0,open:a,onClose:t},r.a.createElement(u.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",boxShadow:24,p:5}},r.a.createElement(p.a,{variant:"h6"},"Are you sure you want to delete this Employee?"),r.a.createElement(u.a,{sx:{paddingTop:"10px"}},r.a.createElement(h.a,{onClick:async()=>{try{await g({url:"/api/employees/".concat(o),method:"delete"}),c("Employee deleted successfully!"),m("#4CCD99"),i(!0),t()}catch(e){console.error("Error deleting:",e),c("Failed to delete employee. Please try again."),m("#FF6347"),i(!0)}}},"Delete"),r.a.createElement(h.a,{onClick:t,autoFocus:!0,sx:{backgroundColor:"#dcf4f8"}},"Cancel")))),r.a.createElement(T.a,{open:l,autoHideDuration:6e3,onClose:()=>i(!1)},r.a.createElement(L.a,{sx:{backgroundColor:d,color:"white"},message:s})))}var M=t(325);function Q(){var e,a;const[t,o]=Object(n.useState)(!1),[l,i]=Object(n.useState)(!1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)([]),[p,E]=Object(n.useState)(null),[x,f]=Object(n.useState)(null),[O,k]=Object(n.useState)([]),[D,T]=Object(n.useState)(1),{mutateAsync:L}=b(),R=Boolean(p),{data:W,isLoading:P,error:Q}=I("api-employees-".concat(D,"-").concat(10,"-").concat(O),"/api/employees",{page:D,limit:10,search:O});Object(n.useEffect)(()=>{W&&m(W)},[W]);const _=()=>c(!0),H=()=>{E(null)},J=()=>{T(D+1)},V=[{field:"firstName",headerName:"First Name",width:130},{field:"lastName",headerName:"Last Name",width:130},{field:"email",headerName:"Email",width:200},{field:"age",headerName:"Age",width:130},{field:"actions",headerName:"Actions",width:130,renderCell:e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{id:"basic-button","aria-controls":R?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":R?"true":void 0,onClick:a=>((e,a)=>{E(e.currentTarget),f(a)})(a,e.row._id)},r.a.createElement(B.a,null)),r.a.createElement(v.a,{id:"basic-menu",anchorEl:p,open:R,onClose:H,MenuListProps:{"aria-labelledby":"basic-button"}},r.a.createElement(w.a,{onClick:H,sx:{color:"#1a1a1a"}},r.a.createElement(h.a,{onClick:_},r.a.createElement(A.a,{sx:{color:"#ff0000"}})," Delete")),r.a.createElement(w.a,{onClick:H,sx:{color:"#1a1a1a"}},r.a.createElement(h.a,{onClick:()=>(e.row._id,i(!0))},r.a.createElement(z.a,{sx:{color:"#0000ff"}})," Edit"))))}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{sx:{paddingTop:"20px",paddingLeft:"60px",paddingRight:"60px"}},r.a.createElement(h.a,{onClick:async()=>{sessionStorage.removeItem("jwt");try{await L({url:"/api/auth/logout/v1",method:"post"}),window.location.href="/login"}catch(Q){console.error("Error updating URL:",Q)}},sx:{backgroundColor:"#319DEB",textTransform:"capitalize",color:"white",borderRadius:"10px",paddingBottom:"200px",fontSize:"14px",width:"140px",height:"45px",padding:"1%","&:hover":{backgroundColor:"#319DEB",color:"white"}}},"Log out"),r.a.createElement(u.a,{sx:{display:"flex",textTransform:"capitalize",paddingTop:"30px"}},r.a.createElement(g.a,{InputProps:{startAdornment:r.a.createElement(C.a,{position:"start"},r.a.createElement(N.a,null)),style:{width:"250px",borderRadius:"10px",height:"45px"}},value:O,onChange:e=>k(e.target.value),placeholder:"Search...",variant:"outlined",fullWidth:!0}),r.a.createElement(h.a,{sx:{backgroundColor:"#319DEB",textTransform:"capitalize",color:"white",borderRadius:"10px",paddingRight:"80px",fontSize:"14px",width:"170px",height:"45px",padding:"1%","&:hover":{backgroundColor:"#319DEB",color:"white"}},onClick:()=>o(!0)},r.a.createElement(S.a,null),"Add employee")),r.a.createElement(j.a,{sx:{paddingTop:"10px",fontSize:"10px"}}),r.a.createElement(u.a,{sx:{paddingTop:"10px"}},P?r.a.createElement("div",null,"Loading..."):Q?r.a.createElement("div",null,"Error: ",Q.message):r.a.createElement(y.a,Object.assign({rows:(null===d||void 0===d?void 0:null===(e=d.employees)||void 0===e?void 0:e.length)>0?null===d||void 0===d?void 0:d.employees:[],columns:V,getRowId:e=>e._id,pageSizeOptions:[10,15,25]},d,{onPageChange:J,onClick:J})),r.a.createElement(M.a,{variant:"outlined",color:"primary",count:Math.ceil(null===W||void 0===W?void 0:W.totalPages),onChange:(e,a)=>T(a),sx:{margin:"20px auto",display:"flex",justifyContent:"center",color:"#0097B2",paddingBottom:"15px"}})),r.a.createElement(F,{handleClose:()=>o(!1),handleOpen:t}),r.a.createElement(q,{handleClose:()=>i(!1),handleOpen:l,employeeId:x,employeeData:null===d||void 0===d?void 0:null===(a=d.employees)||void 0===a?void 0:a.find(e=>e._id===x)}),r.a.createElement(U,{handleClose:()=>c(!1),handleOpen:s,employeeId:x})))}function _(){var e;const[a,t]=Object(n.useState)([]),[o,l]=Object(n.useState)([]),[i,s]=Object(n.useState)(1),{mutateAsync:c}=b(),{data:d,isLoading:m,error:p}=I("api-employees-".concat(i,"-").concat(10,"-").concat(o),"/api/employees",{page:i,limit:10,search:o});Object(n.useEffect)(()=>{d&&t(d)},[d]);const E=()=>{s(i+1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{sx:{paddingTop:"20px",paddingLeft:"60px",paddingRight:"60px"}},r.a.createElement(h.a,{onClick:async()=>{sessionStorage.removeItem("jwt");try{await c({url:"/api/auth/logout/v1",method:"post"}),window.location.href="/login"}catch(p){console.error("Error updating URL:",p)}},sx:{backgroundColor:"#319DEB",textTransform:"capitalize",color:"white",borderRadius:"10px",paddingBottom:"200px",fontSize:"14px",width:"140px",height:"45px",padding:"1%","&:hover":{backgroundColor:"#319DEB",color:"white"}}},"Log out"),r.a.createElement(u.a,{sx:{display:"flex",textTransform:"capitalize",paddingTop:"30px"}},r.a.createElement(g.a,{InputProps:{startAdornment:r.a.createElement(C.a,{position:"start"},r.a.createElement(N.a,null)),style:{width:"250px",borderRadius:"10px",height:"45px"}},value:o,onChange:e=>l(e.target.value),placeholder:"Search...",variant:"outlined",fullWidth:!0})),r.a.createElement(j.a,{sx:{paddingTop:"10px",fontSize:"10px"}}),r.a.createElement(u.a,{sx:{paddingTop:"10px"}},m?r.a.createElement("div",null,"Loading..."):p?r.a.createElement("div",null,"Error: ",p.message):r.a.createElement(y.a,Object.assign({rows:(null===a||void 0===a?void 0:null===(e=a.employees)||void 0===e?void 0:e.length)>0?null===a||void 0===a?void 0:a.employees:[],columns:[{field:"firstName",headerName:"First Name",width:130},{field:"lastName",headerName:"Last Name",width:130},{field:"email",headerName:"Email",width:200},{field:"age",headerName:"Age",width:130}],getRowId:e=>e._id,pageSizeOptions:[10,15,25]},a,{onPageChange:E,onClick:E})),r.a.createElement(M.a,{variant:"outlined",color:"primary",count:Math.ceil(null===d||void 0===d?void 0:d.totalPages),onChange:(e,a)=>s(a),sx:{margin:"20px auto",display:"flex",justifyContent:"center",color:"#0097B2",paddingBottom:"15px"}}))))}function H(e){let{element:a,...t}=e;const n=c();return console.log(n),n?a:r.a.createElement(i.a,{to:"/login"})}var J=function(){return r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{index:!0,element:r.a.createElement(f,null)}),r.a.createElement(i.b,{path:"/dashboard",element:r.a.createElement(H,{element:r.a.createElement(Q,null)})}),r.a.createElement(i.b,{path:"/userDashboard",element:r.a.createElement(H,{element:r.a.createElement(_,null)})})))};const V=new E.QueryClient;l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E.QueryClientProvider,{client:V},r.a.createElement(J,null))))}},[[226,1,2]]]);
//# sourceMappingURL=main.7792440c.chunk.js.map